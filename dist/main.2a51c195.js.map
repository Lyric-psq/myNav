{"version":3,"sources":["main.js"],"names":["stringData","localStorage","getItem","hashMap","JSON","parse","logo","url","name","$sites","$","$last","render","find","remove","forEach","node","index","insertBefore","on","e","preventDefault","stopPropagation","bool","window","confirm","splice","siteName","prompt","simplify","string","x","replace","indexOf","push","toUpperCase","onbeforeunload","stringify","setItem"],"mappings":"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","file":"main.2a51c195.js","sourceRoot":"..\\src","sourcesContent":["const stringData = localStorage.getItem(\"siteData\");\r\n// 如果JSON.parse(stringData)存在就返回，不存在就设定初始值\r\nconst hashMap = JSON.parse(stringData) || [\r\n  { logo: \"B\", url: \"https://www.baidu.com\", name: \"baidu.com\" },\r\n  { logo: \"B\", url: \"https://www.bilibili.com\", name: \"bilibili.com\" },\r\n];\r\nconst $sites = $(\".sites\");\r\nconst $last = $(\".last\");\r\nconst render = () => {\r\n  // 每次渲染都要把之前保存在hash里的数据去掉，不然会多次渲染\r\n  $sites.find(\"li:not(.last)\").remove();\r\n  hashMap.forEach((node, index) => {\r\n    let $sites = $(`<li>\r\n        <a href=\"${node.url}\">\r\n          <div class=\"siteWrapper\">\r\n            <div class=\"oneSite\"><img id=\"icon-img\" src=\"${node.url}/favicon.ico\" alt=\"${node.logo}\"></div>\r\n            <span>${node.name}</span>\r\n            <div class=\"delete\">\r\n                <svg class=\"icon\" aria-hidden=\"true\">\r\n                    <use xlink:href=\"#icon-delete\"></use>\r\n                </svg>\r\n            </div>\r\n            <div class=\"edit\">\r\n                <svg class=\"icon\" aria-hidden=\"true\">\r\n                    <use xlink:href=\"#icon-xiugai\"></use>\r\n                </svg>\r\n            </div>\r\n          </div>\r\n        </a>\r\n      </li>`).insertBefore($last);\r\n    $sites.on(\"click\", \".delete\", (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      const bool = window.confirm(\"确定要删除该网站吗？\");\r\n      if (bool) {\r\n        hashMap.splice(index, 1);\r\n      }\r\n      render();\r\n    });\r\n    $sites.on(\"click\", \".edit\", (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      const siteName = window.prompt(\"请输入新的网站名称\");\r\n      hashMap[index].name = siteName;\r\n      render();\r\n    });\r\n  });\r\n  // $sites.on(\"error\", \"#icon-img\", (e) => {\r\n  //   console.log(e);\r\n  //   this.remove();\r\n  // });\r\n};\r\n// 简化url\r\nconst simplify = (string) => {\r\n  let x = string\r\n    .replace(\"http://\", \"\")\r\n    .replace(\"https://\", \"\")\r\n    .replace(\"www.\", \"\")\r\n    .replace(\"/\", \"\");\r\n  return x;\r\n};\r\nrender();\r\n$(\".addSite\").on(\"click\", () => {\r\n  let url = window.prompt(\"请输入要添加的正确网址噢\");\r\n  if (url.indexOf(\"http\") !== 0) {\r\n    url = \"https://\" + url;\r\n  }\r\n  hashMap.push({\r\n    logo: simplify(url)[0].toUpperCase(),\r\n    url: url,\r\n    name: simplify(url),\r\n  });\r\n  render();\r\n});\r\nwindow.onbeforeunload = () => {\r\n  // localStorage只能保存字符串\r\n  const stringData = JSON.stringify(hashMap);\r\n  localStorage.setItem(\"siteData\", stringData);\r\n};\r\n"]}